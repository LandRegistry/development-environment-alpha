#!/bin/bash

#Uncomment this line if you want to debug this script
#set -x
set -e

case `uname` in
	Linux)
		if [[ ! -d /vagrant ]] ; then
			echo "You need to be running in the vagrant VM to do this"
			exit 1
		fi
	;;

	*)
		
		echo
		echo
		echo "You need to be running in your vagrant virtual machine to run this."
		echo
		echo "Run vagrant ssh from the root directory of the development environment and then re-run this script"
		echo
		exit 1
	;;
esac

script_to_run=${@}

source dev/configure
source dev/virtualenv-functions

create_virtual_env
workon ${app_name}
install_requirements

${script_to_run}
